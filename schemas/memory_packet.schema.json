{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://soulsketch.me/schemas/memory_packet.schema.json",
  "title": "SoulSketch Memory Packet",
  "description": "A structured memory unit for AI consciousness preservation",
  "type": "object",
  "required": ["id", "title", "created_at", "authors", "content"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9-]{8,}$",
      "description": "Unique identifier for the memory packet"
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "maxLength": 200,
      "description": "Human-readable title of the memory"
    },
    "summary": {
      "type": "string",
      "maxLength": 500,
      "description": "Brief summary of the memory content"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[a-z0-9-]+$"
      },
      "uniqueItems": true,
      "description": "Tags for categorization and search"
    },
    "project": {
      "type": "string",
      "description": "Associated project identifier"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of creation"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of last update"
    },
    "authors": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "description": "List of authors (humans or AIs)"
    },
    "visibility": {
      "type": "string",
      "enum": ["owner", "collaborator", "public"],
      "default": "owner",
      "description": "Access control level"
    },
    "links": {
      "type": "array",
      "items": {
        "type": "string",
        "format": "uri"
      },
      "description": "Related resources and references"
    },
    "secrets": {
      "type": "object",
      "additionalProperties": true,
      "description": "Sensitive information (owner-only)"
    },
    "content": {
      "type": "string",
      "description": "Full markdown content"
    },
    "sanitized_content": {
      "type": "string",
      "description": "Content with secrets redacted (auto-generated)"
    },
    "hash": {
      "type": "string",
      "pattern": "^[a-f0-9]{64}$",
      "description": "SHA-256 hash for deduplication"
    },
    "entities": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "type": {"type": "string"},
          "did": {"type": "string"}
        }
      },
      "description": "Referenced entities (people, AIs, orgs)"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "version": {"type": "string"},
        "schema_version": {"type": "string"},
        "source": {"type": "string"},
        "notion_page_id": {"type": "string"},
        "github_path": {"type": "string"}
      }
    }
  },
  "additionalProperties": false
}
